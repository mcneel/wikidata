
====== The nXt RenderFarm ======

A render farm is a group of networked computers working together to complete large rendering tasks.  Normally, render farms proceed silently, without graphically displaying the renderings as they progress.  Rendering this way lets you use more computer power for lengthy tasks, at the expense of some interactivity.
 
Many third-party render farm products are currently available.  The nXt RenderFarm software lets you work with one of these, or you can set up a simple render farm just using the software provided.  //The nXt RenderFarm software is sold separately// from the nXt platform plug-ins, such as AccuRender nXt.  The software itself is platform independent. AutoCAD is not required on computers used only for render farming.

The nXt RenderFarm includes two basic pieces of software:

  - nXtFarmer.exe (nXtFarmer64.exe) is a small program that runs on each network rendering station and waits for jobs to be generated.
  - nXtFarmMonitor.exe (nXtFarmMonitor64.exe) is an applet that shows you the state of your render farm and provides some simple control tools.

The following procedures apply to nXt's included render farm. If you are planning to use third-party render farm software, some of these procedures will be different.

===== Installing and configuring the render farm =====

Create a shared folder the render farm to use.  All the network rendering computers must have read/write access to this folder. The shared folder should have a lot of available disk space to store both data (input) and images (output). We recommend 20 - 200 GB available storage.  You must perform the following four steps on //each// computer you plan to use in the render farm, including any nXt workstations which will submit jobs to the render farm:

  - Install the nXt Render Farm software.
  - From the Start menu, run the Render Farmer on each machine.  The Render Farmer will appear as an icon in the system tray.
  - Right-click on the icon and select **Restore**.  A window title nXt Farmer should appear.
  - Select **Options->Path...** from the menu and select the path to the RenderFarm.  The Farmer window can now be minimized to the tray.

The RenderFarm is now configured. To verify that the farmer machines are responding run the RenderFarm Monitor from the Start menu on any of the workstations.  The machines should appear in the upper list box. If you wish to exclude a machine from participating in the RenderFarm, you can select it, right-click, and choose **Suspend**.


**Updating the render farm software**

You must update all participating computers before submitting a new job to the farm.  Use the following procedure:

  * Wait for any active farm jobs to complete before beginning your update.
  * For each participating computer:
    - If the render farm is currently running, close down the Render Farmer by    right-clicking on the tray icon and selecting **Close**.
    - Install the nXt Render Farm Software.
    - Run the Render Farmer from the Start Menu.  The tray icon should appear. 


===== Licensing the render farm =====

The evaluation version of RenderFarm allows two network machines (nodes) to work on jobs simultaneously. If you wish to have more network nodes running simultaneously you can [[https://www2.mcneel.com/commerce/accurender/buy-farm.asp|buy an unlimited node license]].

Once you have purchased your license and have acquired a Product Key, use one of the following procedures to license your farm.

//**Post-build 244 procedure (recommended):**//

  - Wait for any active farm jobs to complete before beginning your licensing.
  - Save your Product Key to a network location so you can cut and paste it into each node.
  - //For each participating computer://
     - If the node is currently active, shut it down by right-clicking on the RenderFarm tray icon, and selecting **Close**.
     - Run the **Authorize Farm** applet from the nXt Render Farm folder in the Start Menu.     
     - Paste in your Product Key and select **OK**.  A message box indicating success should appear.  If an error condition is indicated the licensing procedure has failed and tech support may be required. Click **OK**.
     - Start the node by selecting **Render Farmer** from the nXt Folder of the Start Menu.
                
//**Prebuild 244 procedure:**//

  - Wait for any active farm jobs to complete before beginning your licensing.
  - Shut down all network nodes first by visiting each machine, right-clicking on the RenderFarm tray icon, and selecting **Close**.
  - Save your Product Key to a network location so you can easily cut and paste it into each node.
  - //For each participating computer://
     - Run the Render Farmer from the Start Menu.  The tray icon should appear.
     - Right-click on the icon and select **Restore**.
     - Select **Options->Enter Product Key...**
     - Paste in your Product Key and select **OK**.
     - Shut down the node by closing the window.
   - Once all computers are licensed you can restart each node.
    
**To verify that you are now running a licensed copy, view the About... box:**

  - Right-click on the tray icon and select **Restore**.
  - Select **Help->About...** to view the About box.
  - The word //Evaluation// should not appear after the version number.  (If the version number indicates an Evaluation version, licensing has not been successful and tech support may be necessary.)  Click **OK**.
  - Minimize the Render Farmer window to return it to the tray.



===== Submitting jobs to the render farm from AccuRender nXt =====

Currently, four job types can be submitted to the render farm for processing by multiple computers: single images from WalkAbout, batch jobs, 3D slide shows, and animation.

===Single images===

You can split single views into smaller tasks and distribute to multiple machines.  Once the job is complete, the images from these tasks can be reconstructed into a single image using the nXt Image Editor.  //At this time, using the Path Tracer to render single images on the farm is not recommended due to several known problems that result in reconstruction artifacts.//

Perform the following steps to submit a single image job to the render farm:

  - Launch WalkAbout and configure your rendering and view.
  - Press the RenderFarm button on the WalkAbout toolbar.
  - Name the job or accept the default.  The date and time is automatically pre-pended to the name you choose.  A sub-folder for the job is created in the RenderFarm shared folder.  An Output folder is also created in the new job folder.
  - Choose to either run the job //now//, //later//, or //after// a scheduled time.  If you choose //later// you will need to use the nXt Render Farm Monitor to manually start the job.

After the job is complete, output is in the job's Output folder.  To reconstruct the output into a single image use the following steps:

  - Open the nXt Image Editor.
  - Load the first image of the sequence, 000000.nXtImage
  - From the menu, select **Image->Arithmetic->Add** for the standard engine or  **Image->Arithmetic->Combine Path Tracings...** for the Path Tracing engine.
  - Select all the other images in the sequence. (Do not select 000000.nXtImage again or it will be counted twice.)

===Batch jobs===

Each batch task is rendered by a single machine.

Perform the following steps to submit a Batch job to the render farm:

  - Configure your batch tasks in the usual way.
  - Press the Farm... button on the Batch DB.
  - Name the job or accept the default.  The date and time is automatically pre-pended to the name you choose.  A sub-folder for the job is created in the RenderFarm shared folder.  An Output folder is also created in the new job folder.
  - Choose to either run the job //now//, //later//, or //after// a scheduled time.  If you choose //later// you will need to use the nXt Render Farm Monitor to manually start the job.

After the job is complete, output is in the job's Output folder.  The output format from Batch jobs is always .nXtImage.

===3D slide show===

Each transition between two slides is rendered by a single machine.  For example, a slide show with five slides will have four transitions and will produce four tasks for the RenderFarm.

Perform the following steps to submit a 3D slide show job to the RenderFarm:

  - Configure your 3D slide show in the usual way.
  - Press the Farm... button on the 3D Slide Show DB.
  - Name the job or accept the default.  The date and time is automatically pre-pended to the name you choose.  A sub-folder for the job is created in the RenderFarm shared folder.  An Output folder is also created in the new job folder.
  - Choose to either run the job //now//, //later//, or //after// a scheduled time.  If you choose //later// you will need to use the nXt Render Farm Monitor to manually start the job.

After the job is complete, output is in the job's Output folder.  The output format from 3D Slide Show jobs is always png.  Your alpha channel choice will be preserved.

=== Animation ===

The animation is split into tasks consisting of 20 contiguous frames.

Perform the following steps to submit an animation job to the RenderFarm:

  - Configure your 3D slide show in the usual way.
  - Press the Farm... button on the Animation DB.
  - Name the job or accept the default.  The date and time is automatically pre-pended to the name you choose.  A sub-folder for the job is created in the RenderFarm shared folder.  An Output folder is also created in the new job folder.
  - Choose to either run the job //now//, //later//, or //after// a scheduled time.  If you choose //later// you will need to use the nXt Render Farm Monitor to manually start the job.

After the job is complete, output can be found in the job's Output folder.  The output format from animation jobs is always png.  Your alpha channel choice will be preserved.