====== MacOS系統裡的自動儲存與版本 ======
蘋果加入一種完全不同的方式來管理您在MacOS的模型，並整合至Rhino for Mac。 關於自動儲存與版本，蘋果的描述在 [[https://support.apple.com/zh-tw/guide/mac-help/mh40710/mac|這裡]]。另一則介紹在 [[https://www.lifewire.com/use-auto-save-and-versions-in-os-x-2260850/|這裡]]。

本文討論了在這些文章中未提及的細節，這些細節對Rhino for Mac的用戶非常重要。

===== Auto Save 跟autosaving是不一樣的 ===== 

autosaving指的是將您的檔案在某處儲存一個備份，以後您的程式能夠找到。 使用者有責任定期儲存檔案，但萬一使用者忘記了，Rhino以及其他程式會建立一個備份檔。

在Mac OS 中，Apple很不幸的用了同樣的詞 。//Auto Save//，來描述完全不同的一件事。 在macOS環境， Auto Save表示 "自動儲存您的檔案" - 自動覆蓋您的檔案，也就是並沒有祕密備份在其他地方，您的原始檔案會一直不斷被覆蓋。macOS的確保留了您的原始檔案，以防你在關閉模型時，想要回復所有的更改。

===== Rhino for Mac何時自動儲存一個模型? =====

當您//切換//到另一個應用程式，就會//時不時//自動保存模型。 蘋果表示，大約在Rhino空轉時，大概每五分鐘，這個功能會保存一次。

當您在執行命令或是以其他方式主動更改模型時，Rhino for Mac不會自動儲存您的模型。寫入硬碟的每個副本，跟你的模型在寫入時一樣準確與一致。 

您可以自己嘗試此實驗。確保您在使用Rhino for Mac，可以在Finder裡找到要看的模型的預覽。 消改模型，然後再等個30秒。 當你看到Finder的預覽顯示更改時，表示Auto Save已經執行完畢。

===== 恢復至原始內容 =====

您對模型進行的任何更改都會自動儲存，但你可能不想保留你做的任何更改。所以當你關閉修改過的模型時，Rhino會問你是否想要儲存所做的更改。 如果你點擊「還原更改(Revert Changes)」，那麼就會還原為原始未更改的模型。

===== 如果Rhino不斷自動儲存模型，我的工作會因為自動儲存(Auto Save)而被打斷或干擾嗎？=====

自動儲存會在背景進行儲存，您不會察覺正在進行儲存，因為Rhino並不會因為自動儲存而變慢，若自動儲存要進行時，您正好在使用Rhino模型，自動儲存功能會自動取消並稍後重試。

===== 電腦硬碟是否因為此功能很快就空間不足? =====

自動儲存經常儲存，但只留存其中幾個版本。自動儲存在一天之中大概一個小時儲存一次；然後一週保存一天的檔案；幾週的其中一週的檔案。 Apple會調用這些版本，您可以使用版本瀏覽器進行瀏覽(參見下文)。

如果您使用Time Machine自動備份電腦的檔案，之前所有3DM檔案版本都會在Time Machine備份中，且並不額外占用本地端磁碟空間。如果您沒有定期備份的習慣，我們強烈建議您現在就開始用Time Machine備份。

===== 持續臨時版本 =====

當您建立模型的時候，工作中很自然會有中斷或是分不同階段。 這些就是使用檔案 > 儲存 (Command-S)，拍攝到目前為止工作快照的好時機。 請記得，系統一個小時會製作一次模型的常規快照，因此如果你想要回復並檢索之前的工作，那會有取多恢復點。 每個用檔案 > 儲存所保留的不同版本，均由版本系統(Versions system)保留。 建立新的版本並不會覆蓋以前的版本，而是會添加到您新的版本集中。

每一次您執行檔案 > 儲存，就會新添一個版本的備份檔案，常常執行這個指令，表示您將會建立//許多//檔案的備份，也許您未來並不需要那麼多不同的備份。如果只是要儲存檔案，只要停止使用Command-S即可。 系統已經為您儲存好。

要確認Mac上大部分的磁碟分配使用情況，我們推薦[[https://daisydiskapp.com/|DaisyDisk]]，建議安裝Non- Mac App Store版本，[[https://daisydiskapp.com/manual/2/en/Topics/AdminScan.html|以管理員身分掃描]] ，以便查看[[https://daisydiskapp.com/manual/2/en/Topics/HiddenSpace.html|隱藏的磁碟空間]]。

===== Rhino  for Mac可以瀏覽所有舊版本的Rhino檔案嗎? =====

可以的。版本瀏覽器是Rhino for Mac的一部分，請瀏覽至//檔案// > // 還原為 //> //瀏覽所有版本...//。如果模型具有自動保存的版本，那麼瀏覽器就會出現。


===== 在瀏覽所有版本中我可以做什麼? =====

在瀏覽所有版本中，左手邊的視窗是您目前的模型，而右手邊的視窗是之前版本的模型，您可以在舊版本中如往常一樣操作Rhino模型，您可以旋轉視圖、顯示/隱藏圖層、甚至由舊版本複製物件至目前的版本。您無法改變舊版本 但您不能也無法//改變//舊版本。

===== 可以刪除舊版檔案嗎? =====

是的，您可以刪除該文件舊版本。請先開啟Rhino for Mac並開啟需要有問題的檔案。請到//檔案// > //回復成// > //瀏覽所有版本 ...// 當版本瀏覽器開啟，將滑鼠游標移動到畫面上方邊緣會出現Rhinoceros功能列。 在//檔案// >// 回復成//，您可以刪除單一舊版本檔案，或若您按住option/alt鍵，即可刪除所有舊版本。這個動作將不會刪除正在開啟的3DM檔案，只會刪除之前所有的舊版本。 如果功能表選項"刪除此版本"或"刪除所有版本"顯示為灰色，表示舊版本或相關版本檔案不在本地磁碟端，它們是Time Machine備份的一部分，無法刪除。

===== Auto Save and Versions with network file servers =====

Rhino的自動儲存功能適用於慢速網路檔案伺服器。當Rhino 啟動自動儲存，您的3DM模型副本便快速被儲存在記憶中，並在背景寫入網路伺服器，不會強制使用者等待伺服器自動儲存寫入完成。 Rhino將3DM寫入伺服器的臨時位置，一旦成功完成，立即將最新自動儲存副本交換至目前檔案。

Rhino的版本取決於您本地macOS磁碟上可用的功能。 但當您的模型位於網路檔案伺服器時，您仍擁有//幾乎所有//的自動儲存和版本的功能。 您的模型經常儲存到網路伺服器，並且只要在Rhino中保持開啟模型，模型之前版本每個小時都會進行儲存。 我們認為針對MSWindows檔案伺服器，之前版本都暫時保留在本地磁碟機上。 您可以使用檔案 >  還原到 > 瀏覽所有版本， 來查看最近工作進度的過去版本。

關閉儲存在網絡檔案伺服器上時，暫時保存的先前版本將被刪除。 Rhino會透過以下對話框來提醒您：

{{:rhino:mac:permanent_version_storage.png?500|/Users/macrhino/Desktop/Screenshots/permanent version storage.png}}

您的檔案將會正常儲存，一旦關閉，將無法存取之前版本。

=== 「此檔案無法自動儲存」 ===

使用網路檔案伺服器的Rhino使用者可能會在彈出視窗看到「該檔案無法自動儲存」的訊息。 這表示與網路檔案伺服器的連結中斷，Rhino無法寫入網路檔案伺服器。 一旦網路恢復連線，Rhino將能再次自動儲存模型。

=====是在Rhino for Mac中是否可以取消檔案版本功能?=====

是的，但**強烈建議您不要取消**檔案版本功能。Rhino for Mac設計為使用自動儲存及檔案版本，若您取消此功能將會影響到軟體效能及穩定性。此外，您將會無法在視窗標題直接標記，重新命名及移動檔案等等。若您因為某些因素要把此功能取消，請開啟Terminal.app並執行下列指令：
    defaults write com.mcneel.rhinoceros ApplePersistence -bool no    
這將會取消自動儲存及檔案版本並且您需要從檔案功能列選擇另存新檔。

若要將回復到預設功能，請再到Terminal指令並且將'no’改回成'yes':
    defaults write com.mcneel.rhinoceros ApplePersistence -bool yes    
要查看當年設定為何，請使用：
    defaults read com.mcneel.rhinoceros ApplePersistence    
如果回覆為0 (或是找不到一對之錯誤)，則將其停用。如果回覆為1，就是已經設定為開啟。

**NOTE**: The above steps do not work on macOS Mojave 10.14.  We do not currently know of a viable workaround.
