====== MacOS系统里的自动储存与版本 ======
苹果加入一种完全不同的方式来管理您在MacOS的模型，并整合至Rhino for Mac。 关于自动储存与版本，苹果的描述在 [[https://support.apple.com/zh-tw/guide/mac-help/mh40710/mac|这里]]。另一则介绍在 [[https://www.lifewire.com/use-auto-save-and-versions-in-os-x-2260850/|这里]]。

本文讨论了在这些文章中未提及的细节，这些细节对Rhino for Mac的用户非常重要。

===== Auto Save 跟autosaving是不一样的 ===== 

autosaving指的是将您的档案在某处储存一个备份，以后您的程序能够找到。 使用者有责任定期储存档案，但万一使用者忘记了，Rhino以及其他程序会建立一个备份档。

在Mac OS 中，Apple很不幸的用了同样的词 。//Auto Save//，来描述完全不同的一件事。 在macOS环境， Auto Save表示 "自动储存您的档案" - 自动覆盖您的档案，也就是并没有祕密备份在其他地方，您的源文件会一直不断被覆盖。macOS的确保留了您的源文件，以防你在关闭模型时，想要回复所有的更改。

===== Rhino for Mac何时自动储存一个模型? =====

当您//切换//到另一个应用程序，就会//时不时//自动保存模型。 苹果表示，大约在Rhino空转时，大概每五分钟，这个功能会保存一次。

当您在执行命令或是以其他方式主动更改模型时，Rhino for Mac不会自动储存您的模型。写入硬盘的每个副本，跟你的模型在写入时一样准确与一致。 

您可以自己尝试此实验。确保您在使用Rhino for Mac，可以在Finder里找到要看的模型的预览。 消改模型，然后再等个30秒。 当你看到Finder的预览显示更改时，表示Auto Save已经执行完毕。

===== 恢复至原始内容 =====

您对模型进行的任何更改都会自动储存，但你可能不想保留你做的任何更改。所以当你关闭修改过的模型时，Rhino会问你是否想要储存所做的更改。 如果你点击「还原更改(Revert Changes)」，那么就会还原为原始未更改的模型。

===== 如果Rhino不断自动储存模型，我的工作会因为自动储存(Auto Save)而被打断或干扰吗？=====

自动储存会在背景进行储存，您不会察觉正在进行储存，因为Rhino并不会因为自动储存而变慢，若自动储存要进行时，您正好在使用Rhino模型，自动储存功能会自动取消并稍后重试。

===== 计算机硬盘是否因为此功能很快就空间不足? =====

自动储存经常储存，但只留存其中几个版本。自动储存在一天之中大概一个小时储存一次；然后一周保存一天的档案；几周的其中一周的档案。 Apple会调用这些版本，您可以使用版本浏览器进行浏览(参见下文)。

如果您使用Time Machine自动备份计算机的档案，之前所有3DM档案版本都会在Time Machine备份中，且并不额外占用本地端磁碟空间。如果您没有定期备份的习惯，我们强烈建议您现在就开始用Time Machine备份。

===== 持续临时版本 =====

当您建立模型的时候，工作中很自然会有中断或是分不同阶段。 这些就是使用档案 > 储存 (Command-S)，拍摄到目前为止工作快照的好时机。 请记得，系统一个小时会制作一次模型的常规快照，因此如果你想要回复并检索之前的工作，那会有取多恢复点。 每个用档案 > 储存所保留的不同版本，均由版本系统(Versions system)保留。 建立新的版本并不会覆盖以前的版本，而是会添加到您新的版本集中。

每一次您执行档案 > 储存，就会新添一个版本的备份档案，常常执行这个指令，表示您将会建立//许多//档案的备份，也许您未来并不需要那么多不同的备份。如果只是要储存档案，只要停止使用Command-S即可。 系统已经为您储存好。

要确认Mac上大部分的磁碟分配使用情况，我们推荐[[https://daisydiskapp.com/|DaisyDisk]]，建议安装Non- Mac App Store版本，[[https://daisydiskapp.com/manual/2/en/Topics/AdminScan.html|以管理员身分扫描]] ，以便查看[[https://daisydiskapp.com/manual/2/en/Topics/HiddenSpace.html|隐藏的磁碟空间]]。

===== Rhino  for Mac可以浏览所有旧版本的Rhino档案吗? =====

可以的。版本浏览器是Rhino for Mac的一部分，请浏览至//档案// > // 还原为 //> //浏览所有版本...//。如果模型具有自动保存的版本，那么浏览器就会出现。


===== 在浏览所有版本中我可以做什么? =====

在浏览所有版本中，左手边的视窗是您目前的模型，而右手边的视窗是之前版本的模型，您可以在旧版本中如往常一样操作Rhino模型，您可以旋转视图、显示/隐藏图层、甚至由旧版本复制物件至目前的版本。您无法改变旧版本 但您不能也无法//改变//旧版本。

===== 可以删除旧版档案吗? =====

是的，您可以删除该文件旧版本。请先开启Rhino for Mac并开启需要有问题的档案。请到//档案// > //回复成// > //浏览所有版本 ...// 当版本浏览器开启，将鼠标游标移动到画面上方边缘会出现Rhinoceros功能列。 在//档案// >// 回复成//，您可以删除单一旧版本档案，或若您按住option/alt键，即可删除所有旧版本。这个动作将不会删除正在开启的3DM档案，只会删除之前所有的旧版本。 如果功能表选项"删除此版本"或"删除所有版本"显示为灰色，表示旧版本或相关版本档案不在本地磁碟端，它们是Time Machine备份的一部分，无法删除。

===== Auto Save and Versions with network file servers =====

Rhino的自动储存功能适用于慢速网络档案服务器。当Rhino 启动自动储存，您的3DM模型副本便快速被储存在记忆中，并在背景写入网络服务器，不会强制使用者等待服务器自动储存写入完成。 Rhino将3DM写入服务器的临时位置，一旦成功完成，立即将最新自动储存副本交换至目前档案。

Rhino的版本取决于您本地macOS磁碟上可用的功能。 但当您的模型位于网络档案服务器时，您仍拥有//几乎所有//的自动储存和版本的功能。 您的模型经常储存到网络服务器，并且只要在Rhino中保持开启模型，模型之前版本每个小时都会进行储存。 我们认为针对MSWindows档案服务器，之前版本都暂时保留在本地磁碟机上。 您可以使用档案 >  还原到 > 浏览所有版本， 来查看最近工作进度的过去版本。

关闭储存在网络档案服务器上时，暂时保存的先前版本将被删除。 Rhino会透过以下对话框来提醒您：

{{:rhino:mac:permanent_version_storage.png?500|/Users/macrhino/Desktop/Screenshots/permanent version storage.png}}

您的档案将会正常储存，一旦关闭，将无法存取之前版本。

=== 「此档案无法自动储存」 ===

使用网络档案服务器的Rhino使用者可能会在弹出视窗看到「该档案无法自动储存」的讯息。 这表示与网络档案服务器的连结中断，Rhino无法写入网络档案服务器。 一旦网络恢复连线，Rhino将能再次自动储存模型。

=====是在Rhino for Mac中是否可以取消档案版本功能?=====

是的，但**强烈建议您不要取消**档案版本功能。Rhino for Mac设计为使用自动储存及档案版本，若您取消此功能将会影响到软件效能及稳定性。此外，您将会无法在视窗标题直接标记，重新命名及移动档案等等。若您因为某些因素要把此功能取消，请开启Terminal.app并执行下列指令：
    defaults write com.mcneel.rhinoceros ApplePersistence -bool no    
这将会取消自动储存及档案版本并且您需要从档案功能列选择另存新档。

若要将回复到预设功能，请再到Terminal指令并且将'no’改回成'yes':
    defaults write com.mcneel.rhinoceros ApplePersistence -bool yes    
要查看当年设定为何，请使用：
    defaults read com.mcneel.rhinoceros ApplePersistence    
如果回覆为0 (或是找不到一对之错误)，则将其停用。如果回覆为1，就是已经设定为开启。

**NOTE**: The above steps do not work on macOS Mojave 10.14.  We do not currently know of a viable workaround.
