====== Notes ======
This plug-in is included in [[http://download.rhino3d.com/rhino/5.0/wip/|Rhino 5.0 WIP]].

Command names in V5 are **BringForward, BringToFront, SendBackward, SendToBack** and **ClearDrawOrder**

====== Draw Order Display ======
> **Summary:** This plug-in adds a new display pipeline that allows you to display objects by layer and/or user specified order.  //<color red>This is a prototype.</color>//
=====Contents=====

{{http://en.wiki.mcneel.com/content/upload/images/DrawOrder_small1.png}}

  * [[#Overview]]
  * [[http://download.mcneel.com/download.asp?id=DrawOrder&language=|Download]] - //Updated 16-Jun-2008//
  * [[#Installation]]
  * [[#Interface]]
  * [[#Known Limitations]]
  * [[#Feedback]]


=====Overview=====

{{http://en.wiki.mcneel.com/content/upload/images/DrawOrder_large1.png}}

Since the early releases of Rhino V4, all viewports have defaulted to using [[rhino:opengl|OpenGL]] as the primary display pipeline. However, Rhino's default [[rhino:opengl|OpenGL]] engine uses depth-buffered drawing to draw everything from curves and surfaces, to text and hatches. This means that everything will always get displayed in a very well defined manner, which is based on distance (depth) from the camera. Therefore, there is no way to force something that is further from the camera to show up in front of something that is closer to the camera, or vice versa.

With the introduction of this DrawOrder plug-in prototype, you now have more options available to help in determining how and when objects get displayed and in a specified draw-order. Basically, objects can now be displayed based on Layer order, and then within a specific layer, objects can be arranged in a user-specified order.

Rhino has always sorted its objects by layer order, however, because of the depth-buffering mentioned earlier, this really had no impact on the order in which objects appeard on the screen. This plugin changes all of that, and now objects will really appear Top-to-Bottom in the same order the layers appear in the Layer Manager (Top-to-Bottom). When you move a layer down the stack, all objects on that layer will move behind all objects on the layer(s) that are now above the layer just moved...and moving the layer up the stack has the same effect only in the opposite direction.

Sometimes drawing objects based on layer order is just not enough, and you usually end up having to come up with more layers than you'd like just to get an object to display in front or in back of another object. This plug-in attempts to solve that problem too. There are several commands that allow you to arrange objects within a specified layer, by moving them forward, backward, all the way to the front, or all the way to the back. But keep in mind, these operations are only relative to the objects that exist on the same layer as the objects you're moving. In other words, you will not be able to force an object on one layer to show in front of, or behind of, an object on another layer, especially if that other layer lives higher up the stack within the Layer Manager.

=====Installation=====

Simply [[http://download.mcneel.com/download.asp?id=DrawOrder&language=|download]] and install the plugin as you would any other Rhino plugin...either by dragging and dropping it onto Rhino, or using the Plugin Manager to load it. Then you can either create a new display mode or you can just modify one of your existing ones, and change the Pipeline setting to "Display2D" or "OrderedDisplay" depending on what's available.

For example: (once the plugin is installed)

  - Go to Options->Appearance->Advanced Settings
  - Select a display mode like "Wireframe", and then click the Copy button at the bottom.
  - Rename the mode to something like "Ordered Wireframe" or something...
  - Now go into the new mode's "Other Settings" (ie. Options->Appearance->Advance Settings->Ordered Wireframe->Other Settings) and change the **Pipeline** setting to "Display2D" or "OrderedDisplay".

That's it. Now any viewport that you set to use the "Ordered Wireframe" display mode, will display all objects from front to back in Layer Order. So that when you select a

Layer and move it up or down in the layer tree, the display order of your objects will now change on-the-fly.

> **Note:** //All shaded modes are supported as well, however, depth-testing is only done on a per-object basis... There's really no way to have objects depth-buffered correctly and at the same time have them display on-top or behind other depth-buffered objects. But, each 3D object (ie. non-planar) will be depth-buffered and therefore, will render correctly.//

=====Interface=====

The interface to this plugin is really just the Layer Manager:

{{http://en.wiki.mcneel.com/content/upload/images/DrawOrder_LM1.png}}

Using the Layer Manager and the two controls (circled above), you can move layers up and down and thereby cause objects to display in certain order. However, as mentioned earlier, this may not be enough flexibility for some, therefore there are 4 commands available:

  - **MoveForward**
  - **MoveBackward**
  - **MoveToFront**
  - **MoveToBack**

..that allow you to arrange objects within the same layer in any order you want them to appear. Simply select an object and run one of these commands, and the object will move accordingly. There is also a very simple [[http://download.mcneel.com/s3/mcneel/plug-in/labs/en/DrawOrder.tb|Toolbar]] (shown below) available that exposes these commands, if you don't want to make your own.

{{http://en.wiki.mcneel.com/content/upload/images/DrawOrder_TB1.png}}

=====Known Limitations=====

  * Block objects are currently not supported. It's uncertain what the expected results are supposed to be at this time.

=====Feedback=====



