====== Notes ======
This plug-in is included in the [[http://download.rhino3d.com/rhino/5.0/wip/|Rhino 5.0 WIP]]. Command name is **ApplyDisplacement** in V5.

====== Displacement ======
> **Summary:** //Real and Rendertime displacement addon//

[[http://en.wikipedia.org/wiki/Displacement_mapping|Displacement mapping]] is the geometric cousin of [[http://en.wikipedia.org/wiki/Bump_mapping|bump mapping]] . It allows you to deform meshes (be it mesh objects or [[rhino:nurbs|NURBs]] render-meshes) based on the greyscale data of a texture.

The Displacement plugin available here requires the [[labs:rendererdevelopmentkit10|RDK]] to run. However, it is possible you already have the RDK installed, so only download and install the RDK when you cannot load this plugin.

 [[http://en.wiki.mcneel.com/content/upload/files/displacement.zip|Download the plugin]] 

\\

----
\\

Here's how this plugin works:

\\

1. You start with an object without any displacement data. All displacement properties are grouped under the Displacement tab in the Object properties dialog:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_01.png}}

\\
\\

2. You have to enable the displacement on a per-object basis. This means you can also quickly disable displacement without losing your settings. Once you enable displacement **and** pick a texture (in this case I've used a standard procedural that comes with the RDK), you'll see a preview of the displacement in the viewport:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_02.png}}

\\
\\

3. You can boost the effect by picking a higher **Amount** value. This value indicates the number of units that a white pixel will be displaced. Black pixels are not displaced at all and grey pixels are interpolated:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_03.png}}

\\
\\

4. Displacement is tied to the texture mapping properties of an object. Since I've picked a polysurface to start with, every face has it's own texture domain, which results in a very lumpy displacement. When I override the texture mapping to be spherical (the default is per surface), there are no more sudden uv jumps across adjacent surfaces and the result becomes smoother. There still is a uv jump across the sphere seam though:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_04.png}}

\\
\\

----

\\
\\

If you need some more control over the displacement behaviour, you can enable the **Advanced controls** section. The advanced controls provide an interface for the core settings of the displacement algorithm such as offsets, subdivision and iteration.

For example, with Advanced settings enabled you can specify different values for black and white pixel offsets:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_Ad_01.png}}
{{http://en.wiki.mcneel.com/content/upload/images/Displacement_Ad_02.png}}

\\
\\

The **Ignore creases** option will completely weld a mesh prior to displacement, meaning the edges of polysurfaces that contain uv jumps will become less appearent.

\\
\\

By default, meshes are subdivided prior to displacement to ensure a higher level of detail where needed. You can disable subdivision by unchecking the box, meaning the resulting displaced mesh is identical in size to the original mesh:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_Ad_03.png}}

\\
\\

Observe what happens when we enable subdivision:

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_Ad_04.png}}

Every triangle in the mesh is measured to see whether or not is exceeds the contract threshold (the lower the threshold the more agressive the subdivision) and if it does, it will be replaced by three smaller triangles. This process repeats itself **Max steps** times. Do note that picking low **Contrast** values or high **Max steps** values might result in long calculation times.

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_Ad_05.png}}

\\
\\

{{http://en.wiki.mcneel.com/content/upload/images/Displacement_Ad_06.png}}
(A closup of the displaced mesh, showing the subdivision scheme)

\\

----

\\
\\

Displacement meshes can be extracted with the _ExtractDisplacedMeshes command.



----

See also: [[labs:curvepiping|CurvePiping]]


