====== Zooのトラブルシューティング ======
> **製品:** //[[ja:zoo:home|Zoo]]//
> **要約:** //Zooワークグループライセンスマネージャに関する問題の解決のヒント//

===== 概要 =====
Zooは**メールスロット**という、シンプルなプロトコルに依存しないメッセージングテクノロジを使用してRhinoと通信します。 Microsoftネットワークはドメインのログオンサービスを含む様々なエリアでメールスロットメッセージを使用しています。 メールスロットメッセージングは最近のMicrosoftオペレーティングシステムすべてで動作します。 メールスロットメッセージングはワークグループネットワークとドメインネットワークの両方で動作します。

Zooの設定という点においては、まったく何もする必要がありません。すべてのコンピュータが同じWindowsドメインまたはワークグループに属し、同じサブネットにインストールされていれば、Zooは要求に応じてライセンスを割り当てられるはずです。 Zooを使用する際の留意点は次のとおりです。

  * 最新バージョンのZooが実行されていることを確認してください。
  * Zooコンソールアプリケーションを実行する際は管理者ユーザーまたは管理者ユーザーグループのメンバーとしてログインしていることを確認してください。
  * [[ja:rhino:home|Rhino]]、そして[[ja:brazil:home|Brazil]]、[[ja:bongo:home|Bongo]]、[[ja:flamingo:home|Flamingo]]、[[ja:penguin:home|Penguin]]といったZooをサポートするプラグインは最新のサービスリリースが実行されていることを確認してください。

===== アプリケーションに関する留意点 =====
  * ZooはWindows 2000、Windows XP、Windows Vista、Windows 7、Windows Server 2000、2003、2008のシステムで作動します。
  * Zooには、[[http://www.microsoft.com/downloads/details.aspx?familyid=200b2fd9-ae1a-4a14-984d-389c36f85647&displaylang=ja|Microsoft C++ 2005 SP1 再頒布可能パッケージ (x86)]]がシステムにインストールされていることが必要です。
  * ZooはRhino 2.0または3.0の教育版または教育版ラボラトリーライセンス(CD-Key)とは使用できません。
  * Zooはアジア言語版のWindowsで実行されているRhino 2.0または3.0とは使用できません。
  * すべての製品がルーティングネットワークを介してライセンスを取得できるわけではありません。 ルーティングネットワークでZooが実行できる製品、できない製品の一覧については[[ja:zoo:products|Zooと製品の互換性]]ページをご覧ください。
  * Zooコンソールアプリケーションを実行する際は管理者ユーザーまたは管理者ユーザーグループのメンバーとしてログインしてください。

===== ネットワークに関する留意点 =====
  * すべてのシステムは同じ**Windowsドメインまたはワークグループ**に属している必要があります。 
  * **2011年6月3日更新**: 新しい問題を抱えたユーザーにお聞きしたところ、ZooサーバーとRhinoクライアントが微妙に異なるサブネットマスクを使用していました。1つは255.255.255.0、もう1つは255.255.248.0でしたが、両方のシステムが同じ255.255.255.0のサブネットマスクを使用するまでRhinoクライアントはライセンスを取得することができませんでした。
  * 使用しているネットワーク接続に**Microsoftネットワーク用クライアント**がインストールされ、有効になっていることを確認してください。 そうでない場合、"Failed to write to client mailslot"（クライアントのメールスロットへの書き込みに失敗しました）というエラーがZooのログファイルに書き込まれます。
  * TCP/IPを使用している場合は、TCP/IPの詳細設定オプションで**[[ ja:rhino:netbios|NetBIOS]] over TCP/IPを有効にする**が設定されていることを確認してください。 そうでない場合、"Failed to write to client mailslot"（クライアントのメールスロットへの書き込みに失敗しました）というエラーがZooのログファイルに書き込まれます。
  * RhinoまたはZooのいずれかを実行しているコンピュータがファイアウォールを使用している場合、次のポートが開かれていることを確認してください。
    * **UDP Ports 137および138**
    * **TCP Port 139**
  * これらのポートはWindowsが[[ja:rhino:netbios|NetBIOS]]通信に使用します。 組み込みの**Windowsファイアウォール**を使用している場合は、例外で**ファイルとプリンタの共有**を有効にしておく必要があります。
\\
{{:ja:zoo:zoo_windows_firewall_j.png|}}
  * RhinoのシステムをDNSまたはレジストリキーの参照ができるように設定していない場合は、すべてのRhinoのワークステーションとZooを実行しているシステムを同じネットワークサブネットにインストールする必要があります。 これはRhinoとZooの両方がメッセージをブロードキャストするからです。 ブロードキャストされるメールスロットメッセージは、ネットワークルーターや一部のスイッチを通りません。 ワイヤレスルーターもブロードキャストメッセージを転送しません。

==== Zooとクライアントの間の名前解決の動作の確認 ====
**nbtstat**は、[[ja:rhino:netbios|NetBIOS]]の名前解決の問題のトラブルシュートを助けるようにデザインされています。ネットワークが問題なく機能している場合、[[ja:rhino:netbios|NetBIOS]] over TCP/IPは [[ja:rhino:netbios|NetBIOS]]名に対するIPアドレスの解決をします。これは、ローカルキャッシュ参照、WINSサーバー問い合わせ、ブロードキャスト、LMHOSTSおよびHOSTS参照、DNS サーバー問い合わせを含む、[[ja:rhino:netbios|NetBIOS]]名前解決のためのいくつかのオプションを通して行われます。

**nbtstat**を使用して名前解決をテストするには:

  - Zooサーバーでコマンドプロンプトを開きます。
  - **nbtstat -a <クライアントコンピュータ名>**とタイプします。
  - ネットワークアダプタの1つがクライアントコンピュータの名前解決をします。
  - クライアントコンピュータでコマンドプロンプトを開きます。
  - **nbtstat -a <Zooサーバー名>**とタイプします。
  - ネットワークアダプタの1つがZooコンピュータの名前解決をします。

**nbtstat**がZooそしてクライアントの情報を返さない場合は、Zooはこのネットワークの設定では動きません。この場合、お使いのネットワークが適切な[[ja:rhino:netbios|NetBIOS]]名前解決をサポートするにはどのようにすればよいかは、この文書やMcNeelサポートの範囲ではなく、お答えできません。

==== Zooとクライアント間の接続の確認 ====
**net view**コマンドは、ドメイン、コンピュータ、または特定のコンピュータ上で利用可能な共有リソースの一覧を表示します。パラメータを付けずに使用すると、**net view**は現在のドメイン内のコンピュータの一覧を表示します。 

**net view**コマンドを使用して接続をテストするには:

  - Zooサーバーでコマンドプロンプトを開きます。
  - **net view \\<クライアントコンピュータ名>**とタイプします。
  - クライアントコンピュータでコマンドプロンプトを開きます。
  - **net view \\<Zooサーバー名>**とタイプします。

**net view**コマンドは一時的な接続を確立することで、ファイル共有と印刷共有の一覧を表示します。

  * 指定したコンピュータにファイル共有も印刷共有もない場合は、**net view**コマンドは[一覧にエントリが存在しません]というメッセージを表示します。
  * [システムエラー53が発生しました]というメッセージが表示されて**net view**コマンドが失敗した場合は、コンピュータ名が正しいこと、コンピュータが動作可能であること、およびこのコンピュータと使用するコンピュータの間にあるすべてのゲートウェイ (ルーター) が動作可能であることを確認します。
  * [システムエラー5が発生しました。アクセスが拒否されました。]というメッセージが表示されて**net view**コマンドが失敗した場合は、リモートコンピュータ上の共有を表示するアクセス許可を持つアカウントを使用してログオンしていることを確認します。

この接続の問題をさらにトラブルシューティングするには、次の操作を行います。

  * **net view**コマンドとコンピュータのIPアドレスを、このように指定します: **net view \\<IPアドレス>**
  * **net view**コマンドが成功した場合、コンピュータ名は間違ったIPアドレスに解決されています。
  * [システムエラー53が発生しました]というメッセージが表示されて**net view**コマンドが失敗した場合は、リモートコンピュータで Microsoftネットワーク用ファイルとプリンタ共有サービスが動作していない可能性があります。

===== Zooに関する留意点 =====
  * ZooはRhinoクライアントとの交信ログファイル(**ZOO.LOG**)を保存することができます。 ログファイルはいくつかの通信の問題を診断するのに役立つことがあります。 ZOO.EXEがあるフォルダにログファイルが見つからない場合、Zooアプリケーションで**Tools->Options**を選択するとログ記録をオンにすることができます。NOTEPAD.EXEを使ってログファイルをチェックすると、RhinoのメッセージをZooが受け取り、Zooがそのメッセージに応答しているかどうかを確認することができます。

===== Zooボーナスツール =====
ルーティングネットワークでZooを使用する際にRhinoがZooを見つけられない場合は、Zoo参照（レジストリキーまたはDNS）が正しく設定されていないことが考えられます。この場合、Zooボーナスツールを使うと、問題が解決することがあります。Zooボーナスツールには次のユーティリティが含まれています。

  - **SetZooServer.exe** - ワークステーションのレジストリキー参照設定を手助けします。
  - **ZooDnsResolver.exe** - DNS参照機能のテストを手助けします。

**[[http://wiki.mcneel.com/_media/legacy/en/ZooBonusTools.zip|ボーナスツールをダウンロード]]**

\\

-------------------------------------------------------------------------------
{{tag>Zoo_Japanese}}