====== AccuRender Performance Tuning ======

======ACCURENDER PERFORMANCE TUNING======
> **Summary:** //How to improve AccuRender//
=====YOUR COMPUTER:=====

The speed of the **main processor** in your computer is the main factor in AccuRender performance.

A dual-processor or dual-core processor (when correctly enabled in Windows NT, Windows 2000, Windows XP or Windows Vista) will speed up rendering, probably by 85%, compared to a single processor.  Four processors will be even better, but beyond four there is not much speed improvement for the current AccuRender versions.

**Graphics cards** don't speed up AccuRender rendering.

=====RAM MEMORY=====
Rendering with inadequate **RAM memory** is a major reason for slow AccuRender performance. To recognize a shortage in RAM, watch disk your disk access light, or use TaskManager, as below:

Watch your disk drive light while the image is painting on the screen  -- you should see almost no disk activity.  If the rendering process is causing significant amount of disk accesses (paging, swapping) AccuRender will be slowed down, and AccuRender will be slowed down.

For more precision about RAM on NT, Win2000, XP or Vista, run TaskManager.exe, and on the Performance tab, note the PhysicalMemory/Total (your amount of RAM).  Then look down in the lower left corner at Commit Charge (means total memory space currently used by Windows for everything, including [[rhino:autocad|AutoCAD]] and AccuRender).

If during a rendering CommitCharge/Total is way above PhysicalMemory/Total (say 50% higher, or double), it means that [[rhino:autocad|AutoCAD]] and AccuRender are demanding more virtual memory space than your RAM, so that Windows is having to swap some memory on and off your hard disk.  The rendering will complete eventually, but disk drive access is said to be 1000x slower than RAM access, so this paging/swapping can drastically slow the rendering process.

If you are running NT, Win2000, WinXP, or Vista run Performance Monitor (perfmon.exe) and monitor Memory/PageWritesPerSecond. There are a few of these all the time, maybe 1-5 per second. But once [[rhino:autocad|AutoCAD]] and AccuRender are stressing virtual memory, it shoots up to 20 or 50 or so per second, and the disk drive light is on a lot.

=====OUT OF MEMORY ERRORS=====
Because of Windows (32-bit) limit of 2GB of memory space per process, Windows can't allocate more than 2GB of Virtual Memory to the AutoCAD/AccuRender process.  So RAM beyond 2GB is probably not cost-effective.  And if your model is meshed too finely (see meshing below) or is just too big, and you try to Render it, eventually you will get an out-of-memory message and [[rhino:autocad|AutoCAD]] will crash (close).  If you watch the memory usage in Task Manager you can see the CommitCharge approach 2GB before the crash.

For more precision on this, use TaskManager  > Processes then pick SelectColumns from the View pulldown menu, and select VirtualMemorySize.  Watch that "VMSize column for the process Acad.exe, in 32-bit Windows that will be limited to 2GB (2,000,000K).

=====VIRTUAL MEMORY=====
You should allocate more than 2GB of disk space to Windows Virtual Memory.  To check on this do Control Panel > System > Advanced and look for Performance and Virtual Memory. If you have plenty of disk space, allocate 4GB (4000MB).  Virtual memory is disk space used to extend RAM (swap file or page file) when Windows needs more space than you have RAM ("Physical memory").

=====ANTIALIASING SETTING:=====

We recommend using AR3/Raytrace/Settings/Quality/AntiAliasing at Medium or High because higher settings drastically slow down the rendering and use lots more memory.

There may be some special situations where increasing AntiAliasing is required but it is usually more economical of rendering time to increase resolution instead to get the same clarity in the final print.

=====RESOLUTION -- RENDERING AND PRINTING:=====

In AR3/Raytrace/Settings/Main/Destination choose "Walkabout Window"

In AR3/Raytrace/Settings/Main/Resolution choose "Viewport" when you are assigning materials, adjusting your views, doing test renderings, etc. This calculates just enough pixels to show you the image on the screen, nothing wasted.

To save time during test rendering, use AR3/Raytrace/Raytrace/Window < to render small portions of your image quickly.

Also use AR3/Raytrace/Raytrace/Quick to make a rough full-view rendering on your screen that shows the colors, shadows, reflections, etc. but doesn't do the third pass of AntiAliasing, which is time-consuming.

Choose a higher resolution such as 1024x768 or higher in AR3/Raytrace/Settings/Main/Resolution when rendering to save to an image file for printing your final output.

Increase your final-rendering resolution above our suggested resolutions (based on 85 dots-per-inch-of-printout) if you find that your printed output is not clear enough.  (Doubling the resolution quadruples the rendering time).

Be mindful that some image printing programs tend to default to printing your image only at the 72 dpi scale which AccuRender sets in the images it saves.  You should modify the printing scale to your needs, without changing the XY pixel resolution of the image.

Adobe PhotoShop is tricky to print with, it seems locked in on the concept of DPI.  You never want to "rescan" or change the resolution (X and Y pixel counts) of your image, but you do want to print it the size you want.  So you may want to use PhotoShop to change the DPI value stored in the image file from 72 (AccuRender sets all its images to that setting) to something higher, up to about 150, or even higher if the image has to print on a very high-resolution photo-quality printer.

Experiment to find the minimum pixels-per-inch-of-paper that you need to get adequate printed images. Anything higher is wasted time in rendering.

As implied above, excessive resolution and excessive settings on the Raytrace/Quality tab are the commonest reasons for long rendering times.

=====REFLECTIVE AND TRANSPARENT OBJECTS:=====
Are you using a lot of transparent or reflective objects? If you see unnatural black areas in those objects, increase Bounces at AR3/Raytrace/Settings/Quality.  Transparency does increase rendering time.

=====MESHING AND MESH DENSITY:=====
AccuRender renders from polyface meshes (polygon meshes) generated by [[rhino:autocad|AutoCAD]].  The more mesh triangles (polygons), the longer the rendering time. Therefore it is important to minimize the mesh size,

without affecting the rendering quality.

A common problem in AccuRender is that circular or arc surfaces (such as cylinders or spheres) may appear faceted in profile because they are rendering as squares or **hexagons**.  This is due to [[rhino:autocad|AutoCAD]] generating a polygon mesh for the surface that is too crude for your needs.

The solution is to ask AccuRender to make a custom polygon mesh, as follows:

To increase meshing density for objects based on Circles or Arcs:

  * In the AccuRender dialog box, on the Setup tab, click Object Properties.
  * At the Select objects prompt, select objects in your drawing.
  * In the Object Properties dialog box, on the Mesh tab, set Circle/Arc Tesselation to something higher than the default of 16, like 64 or 100.

Another problem is that [[rhino:autocad|AutoCAD]] (ACIS) Solids may be rendering faceted or angled.

To control the tesselation of [[rhino:autocad|AutoCAD]] ACIS Solids, type FACETRES in at the command line, and set it to a value between its default of 0.5 and its maximum of 10 (CAUTION!!). This will affect the fineness of the mesh delivered to AccuRender for the ACIS Solids, and therefore the smoothness in your rendering.  Increasing this value will increase rendering times, often radically.  We recommend keeping VIEWRES at its default of 100.  You will need to REGEN the scene to get this to work - zooming in and typing REGEN will increase the density of the mesh on curved objects.

An alternative way to deal with [[rhino:autocad|AutoCAD]] solids that render roughly, is to replace them with polygon mesh equivalents. [[rhino:rhinoceros|RhinoCeros]] (www.rhino3d.com) can be used to make polygon meshes that match the [[rhino:autocad|AutoCAD]] solid:

save a .[[accurender:ar4:dwg|dwg]] of your troublesome objects, open it in Rhino, then save as .[[accurender:ar4:dwg|dwg]] again (you will have an opportunity to control the fineness of the mesh). Bring those meshes into [[rhino:autocad|AutoCAD]] to replace the ACIS solids with the custom meshes.

=====DIRECT SUPPORT=====

If all this doesn't help, you may need more advice.

Post your questions with sample images on the AccuRender newsgroup (there are links to the newsgroup at http://www.accurender.com/support.htm) or contact McNeel Technical Support, contact information at http://www.accurender.com/support.htm

It helps to give the size of the model (AR3/Tools/Statistics/NumberOfFaces)

and your settings in AR3/Raytrace/RaytraceSettings.





